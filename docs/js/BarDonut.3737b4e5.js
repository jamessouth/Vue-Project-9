(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BarDonut"],{1178:function(t,e,a){"use strict";var r=a("8aaf"),n=a.n(r);n.a},1385:function(t,e,a){"use strict";var r=a("5df8"),n=a.n(r);n.a},"5df8":function(t,e,a){},"8aaf":function(t,e,a){},d716:function(t,e,a){"use strict";a.r(e);var r,n,s,o,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bar_donut"},[a("ChartWrapper",{attrs:{opts:t.barChartOptions,"ch-data":t.chartData,type:"bar"}}),a("ChartWrapper",{attrs:{opts:t.donutChartOptions,"ch-data":t.chartData,type:"donut"}})],1)},l=[],c=(a("e260"),a("e6cf"),a("ddb0"),a("1da1")),d=a("5530"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:{barClass:"bar"===t.type,donutClass:"donut"===t.type}},[t._m(0),a("div",{style:{margin:"0 auto",width:"90%"}},[a("ul",{ref:"legend",style:t.legendStyles})]),"bar"===t.type?a("BarChart",{attrs:{options:t.opts,"chart-data":t.chData}}):a("DonutChart",{attrs:{options:t.opts,"chart-data":t.chData}})],1)},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v(" Natural events from "),a("a",{staticClass:"newwindow",attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://eonet.sci.gsfc.nasa.gov/eonet-project"}},[t._v("EONET")])])}],u=a("1fca"),{reactiveProp:b}=u["d"],f={name:"BarChart",extends:u["a"],mixins:[b],props:{options:{type:Object,required:!0}},watch:{options(){this.renderChart(this.chartData,this.options)}},mounted(){this.renderChart(this.chartData,this.options)}},m=f,g=a("2877"),y=Object(g["a"])(m,r,n,!1,null,"7e701a93",null),C=y.exports,{reactiveProp:w}=u["d"],v={name:"DonutChart",extends:u["b"],mixins:[w],props:{options:{type:Object,required:!0}},mounted(){this.renderChart(this.chartData,this.options)}},x=v,k=Object(g["a"])(x,s,o,!1,null,null,null),O=k.exports,j={name:"ChartWrapper",components:{BarChart:C,DonutChart:O},props:{type:{type:String,required:!0},chData:{type:Object,required:!0},opts:{type:Object,required:!0}},computed:{legendStyles(){return{display:"flex",flexFlow:"row wrap",margin:"auto",justifyContent:"space-around",minHeight:"70px"}}},watch:{chData(){this.legendCallback(this.chData)}},methods:{legendCallback(t){for(var e,a,r,n=t.datasets[0].backgroundColor,s=0;s<t.datasets[0].data.length;s+=1)e=document.createElement("li"),a=document.createElement("p"),r=document.createElement("div"),e.style.display="flex",e.style.alignItems="center",r.style.width="30px",r.style.height="16px",r.style.backgroundColor=n[s],r.style.marginRight="5px",a.textContent=t.labels[s],a.style.fontFamily="'Alegreya Sans', sans-serif",a.style.fontWeight="300",a.style.marginRight="4px",e.appendChild(r),e.appendChild(a),this.$refs.legend.appendChild(e)}}},D=j,S=(a("1178"),Object(g["a"])(D,h,p,!1,null,"5bb6d9f6",null)),E=S.exports,M={name:"BarDonut",components:{ChartWrapper:E},data(){return{narrow:{type:"logarithmic",ticks:{min:0,fontSize:13,callback(t){return 10===t||t%20===0?t:""}},position:"left"},wide:{type:"logarithmic",ticks:{min:0,fontSize:13,callback(t){return t}},position:"left"},xs:{xAxes:[{ticks:{fontSize:1,fontColor:"transparent"},gridLines:{drawOnChartArea:!1,drawTicks:!1}}]},yright:{ticks:{callback(){return""}},position:"right",gridLines:{drawOnChartArea:!1,drawTicks:!1}},mQ:window.matchMedia("(max-width: 580px)"),mQon:null,chartData:{},baseBarChartOptions:{title:{display:!0,text:"Number of Events - past 60 days",fontSize:13},tooltips:{backgroundColor:"#000",displayColors:!1,titleFontSize:13,bodyFontSize:13,titleMarginBottom:6,callbacks:{title(t){return"".concat(t[0].xLabel,":")},label(t){return t.yLabel}}},responsive:!0,layout:{padding:{left:0,right:0,top:0,bottom:0}},legend:{display:!1}},donutChartOptions:{title:{display:!0,text:"Share of Events - past 60 days",fontSize:13},responsive:!0,rotation:Math.floor(100*Math.random())/10*Math.PI,cutoutPercentage:54,animation:{animateScale:!0},tooltips:{backgroundColor:"#000",displayColors:!1,titleFontSize:13,bodyFontSize:13,titleMarginBottom:6,callbacks:{label(t,e){var a=e.datasets[0].data,r=a[t.index],n=a.reduce((t,e)=>t+e,0);return"".concat(e.labels[t.index],": ").concat(Math.round(r/n*1e4)/100,"%")}}},layout:{padding:{left:0,right:0,top:0,bottom:0}},legend:{display:!1,labels:{fontSize:13}}}}},computed:{barChartOptions(){return this.mQon?Object(d["a"])({},this.baseBarChartOptions,{scales:Object(d["a"])({yAxes:[this.narrow,this.yright]},this.xs)}):Object(d["a"])({},this.baseBarChartOptions,{scales:Object(d["a"])({yAxes:[this.wide,this.yright]},this.xs)})}},created(){this.makeAPICall(),this.mQ.addListener(this.handleMQ),this.handleMQ(this.mQ)},methods:{getColors(){var t,e=["#4a051c","#f6f930","#7a9e7e","#31493c","#ffa400","#85c7f2","#baa898","#848586","#c2847a","#d1603d","#c5dca0","#f65be3","#2a2a72"],a=new Set;while(a.size<13)t=Math.floor(13*Math.random()),a.add(t);return[...a].map(t=>e[t])},handleMQ(t){t.matches?this.mQon=!0:this.mQon=!1},makeAPICall(){var t=this;return Object(c["a"])((function*(){try{var e=yield fetch("https://eonet.sci.gsfc.nasa.gov/api/v2.1/events?days=60");if(!e.ok)throw new Error("Network problem - response not ok");if(e=yield e.json(),!e||!e.events||0===e.events.length)throw new Error("No data available");var a=e.events.reduce((t,e)=>(t[e.categories[0].title]=++t[e.categories[0].title]||1,t),{}),r=[],n=[],s=t.getColors();Object.keys(a).forEach(t=>{r.push(t),n.push(a[t])}),t.chartData=Object(d["a"])({},t.chartData,{labels:r,datasets:[{label:"",barPercentage:1,categoryPercentage:1,data:n,backgroundColor:s,borderWidth:Array(13).fill(0)}]})}catch(o){alert("There was a problem grabbing the data: ".concat(o,".  Please try again."))}}))()}}},z=M,_=(a("1385"),Object(g["a"])(z,i,l,!1,null,"f1f6e24a",null));e["default"]=_.exports}}]);
//# sourceMappingURL=BarDonut.3737b4e5.js.map