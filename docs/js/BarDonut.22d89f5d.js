(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["BarDonut"],{"182c":function(t,a,e){},"3c9b":function(t,a,e){"use strict";var r=e("182c"),n=e.n(r);n.a},b6a6:function(t,a,e){"use strict";var r=e("cd9e"),n=e.n(r);n.a},cd9e:function(t,a,e){},d716:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"bar_donut"},[e("Wrapper",{attrs:{opts:t.barChartOptions,chData:t.chartData,type:"bar"}}),e("Wrapper",{attrs:{opts:t.donutChartOptions,chData:t.chartData,type:"donut"}})],1)},n=[],s=(e("ac6a"),e("be94")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{barClass:"bar"===t.type,donutClass:"donut"===t.type}},[t._m(0),e("div",{style:{margin:"0 auto",width:"90%"}},[e("ul",{ref:"legend",style:t.legendStyles})]),"bar"===t.type?e("BarChart",{attrs:{options:t.opts,"chart-data":t.chData}}):e("DonutChart",{attrs:{options:t.opts,"chart-data":t.chData}})],1)},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[t._v("Natural events from\n    "),e("a",{staticClass:"newwindow",attrs:{rel:"noopener noreferrer",target:"_blank",href:"https://eonet.sci.gsfc.nasa.gov/eonet-project"}},[t._v("EONET")])])}],l=e("1fca");const c=l["d"].reactiveProp;var h,d,p={extends:l["a"],mixins:[c],props:["options"],watch:{options(){this.renderChart(this.chartData,this.options)}},mounted(){this.renderChart(this.chartData,this.options)},name:"BarChart"},u=p,b=e("2877"),m=Object(b["a"])(u,h,d,!1,null,"4b038aec",null);m.options.__file="BarChart.vue";var f=m.exports;const g=l["d"].reactiveProp;var y,C,w={extends:l["b"],mixins:[g],props:["options"],mounted(){this.renderChart(this.chartData,this.options)},name:"DonutChart"},v=w,x=Object(b["a"])(v,y,C,!1,null,"a1eedab6",null);x.options.__file="DonutChart.vue";var k=x.exports,D={name:"Wrapper",props:["type","chData","opts"],components:{BarChart:f,DonutChart:k},watch:{chData(){this.legendCallback(this.chData)}},computed:{legendStyles(){return{display:"flex",flexFlow:"row wrap",margin:"auto",justifyContent:"space-around",minHeight:"70px"}}},methods:{legendCallback(t){const a=t.datasets[0].backgroundColor;let e,r,n;for(let s=0;s<t.datasets[0].data.length;s+=1)e=document.createElement("li"),r=document.createElement("p"),n=document.createElement("div"),e.style.display="flex",e.style.alignItems="center",n.style.width="30px",n.style.height="16px",n.style.backgroundColor=a[s],n.style.marginRight="5px",r.textContent=t.labels[s],r.style.fontFamily="'Alegreya Sans', sans-serif",r.style.marginRight="4px",e.appendChild(n),e.appendChild(r),this.$refs.legend.appendChild(e)}}},O=D,_=(e("b6a6"),Object(b["a"])(O,o,i,!1,null,"27e90a3b",null));_.options.__file="Wrapper.vue";var S=_.exports,j={name:"BarDonut",data(){return{narrow:{type:"logarithmic",ticks:{min:0,fontSize:13,callback(t){return 10===t||t%20===0?t:""}},position:"left"},wide:{type:"logarithmic",ticks:{min:0,fontSize:13,callback(t){return t}},position:"left"},xs:{xAxes:[{barPercentage:1,categoryPercentage:1,ticks:{fontSize:1,fontColor:"transparent"},gridLines:{drawOnChartArea:!1,drawTicks:!1}}]},yright:{ticks:{callback(){return""}},position:"right",gridLines:{drawOnChartArea:!1,drawTicks:!1}},mQ:window.matchMedia("(max-width: 580px)"),mQon:null,chartData:{},baseBarChartOptions:{title:{display:!0,text:"Number of Events - past 60 days",fontSize:13},tooltips:{backgroundColor:"#000",displayColors:!1,titleFontSize:13,bodyFontSize:13,titleMarginBottom:6,callbacks:{title(t){return`${t[0].xLabel}:`},label(t){return t.yLabel}}},responsive:!0,layout:{padding:{left:0,right:0,top:0,bottom:0}},legend:{display:!1}},donutChartOptions:{title:{display:!0,text:"Share of Events - past 60 days",fontSize:13},responsive:!0,rotation:Math.floor(100*Math.random())/10*Math.PI,cutoutPercentage:54,animation:{animateScale:!0},tooltips:{backgroundColor:"#000",displayColors:!1,titleFontSize:13,bodyFontSize:13,titleMarginBottom:6,callbacks:{label(t,a){const e=a.datasets[0].data,r=e[t.index],n=e.reduce((t,a)=>t+a,0);return`${a.labels[t.index]}: ${Math.round(r/n*1e4)/100}%`}}},layout:{padding:{left:0,right:0,top:0,bottom:0}},legend:{display:!1,labels:{fontSize:13}}}}},components:{Wrapper:S},computed:{barChartOptions(){return this.mQon?Object(s["a"])({},this.baseBarChartOptions,{scales:Object(s["a"])({yAxes:[this.narrow,this.yright]},this.xs)}):Object(s["a"])({},this.baseBarChartOptions,{scales:Object(s["a"])({yAxes:[this.wide,this.yright]},this.xs)})}},created(){this.makeAPICall(),this.mQ.addListener(this.handleMQ),this.handleMQ(this.mQ)},methods:{getColors(){const t=["#4a051c","#f6f930","#7a9e7e","#31493c","#ffa400","#85c7f2","#baa898","#848586","#c2847a","#d1603d","#c5dca0","#f65be3","#2a2a72"],a=new Set;let e;while(a.size<13)e=Math.floor(13*Math.random()),a.add(e);return[...a].map(a=>t[a])},handleMQ(t){t.matches?this.mQon=!0:this.mQon=!1},async makeAPICall(){try{let a=await fetch("https://eonet.sci.gsfc.nasa.gov/api/v2.1/events?days=60");if(!a.ok)throw new Error("Network problem - response not ok");if(a=await a.json(),!a||!a.events||0===a.events.length)throw new Error("No data available");const e=a.events.reduce((t,a)=>{return t[a.categories[0].title]=++t[a.categories[0].title]||1,t},{}),r=[],n=[],s=this.getColors();Object.keys(e).forEach(t=>{r.push(t),n.push(e[t])}),this.chartData=Object.assign({},this.chartData,{labels:r,datasets:[{label:"",data:n,backgroundColor:s,borderWidth:Array(13).fill(0)}]})}catch(t){alert(`There was a problem grabbing the data: ${t}.  Please try again.`)}}}},E=j,B=(e("3c9b"),Object(b["a"])(E,r,n,!1,null,"fd14fa38",null));B.options.__file="BarDonut.vue";a["default"]=B.exports}}]);
//# sourceMappingURL=BarDonut.22d89f5d.js.map